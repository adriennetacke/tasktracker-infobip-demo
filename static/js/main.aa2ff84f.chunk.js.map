{"version":3,"sources":["RealmApp.js","components/Card.js","components/Loading.js","components/LoginScreen.js","graphql/useTaskMutations.js","graphql/useTasks.js","components/StatusBadge.js","components/TaskContent.js","components/ButtonGroup.js","components/StatusChange.js","components/useChangeTaskStatusButton.js","components/TaskDetailModal.js","components/EditPermissionsModal.js","components/ProjectScreen.js","graphql/useModifiableProjects.js","components/Sidebar.js","graphql/useProjects.js","TaskApp.js","graphql/RealmApolloProvider.js","App.js","serviceWorker.js","index.js"],"names":["RealmAppContext","React","createContext","useRealmApp","app","useContext","Error","RealmAppProvider","appId","children","useState","Realm","setApp","useEffect","currentUser","setCurrentUser","credentials","a","logIn","logOut","wrapped","Provider","value","Layout","styled","div","Card","props","Loading","size","margin","color","uiColors","gray","dark2","LoginScreen","mode","setMode","email","setEmail","password","setPassword","error","setError","isLoggingIn","setIsLoggingIn","handleLogin","e","emailPassword","handleAuthenticationError","handleRegistrationAndLogin","isValidEmailAddress","validator","isEmail","emailPasswordAuth","registerUser","err","Container","LoginFormRow","LoginHeading","type","label","placeholder","onChange","target","state","errorMessage","variant","onClick","ToggleContainer","ToggleText","ToggleLink","preventDefault","oldMode","parts","message","split","reason","length","trimStart","status","reasonRegex","match","groups","parseAuthenticationError","prevErr","LGCard","span","button","green","light2","h1","useTaskMutations","project","addTask","useAddTask","updateTask","useUpdateTask","deleteTask","useDeleteTask","AddTaskMutation","gql","UpdateTaskMutation","DeleteTaskMutation","TaskFieldsFragment","useMutation","update","cache","addedTask","data","modify","fields","tasks","existingTasks","writeFragment","fragment","addTaskMutation","task","variables","_id","ObjectId","_partition","partition","updateTaskMutation","updates","taskId","updatedTask","deleteTaskMutation","taskID","deletedTask","useTasks","useQuery","loading","useAllTasksInProject","StatusBadge","getColorForStatus","getTaskStatusDisplayName","nbsp","String","fromCharCode","TaskContent","TaskDescription","TaskName","name","ButtonGroup","css","direction","StatusChange","from","to","Button","LGButton","ButtonContent","TaskDetailModal","unselectTask","ChangeTaskStatusButton","fromStatus","toStatus","useChangeTaskStatusButton","open","Boolean","setOpen","EditPermissionsModal","isEditingPermissions","setIsEditingPermissions","teamMembers","setTeamMembers","newUserEmailError","setNewUserEmailError","functions","addTeamMember","removeTeamMember","getMyTeamMembers","updateTeamMembers","then","isReadOnly","useTeamMembers","ContentContainer","ModalHeading","ModalText","AddTeamMemberInput","List","map","teamMember","ListItem","key","TeamMemberContainer","TeamMemberName","aria-label","className","inputValue","setInputValue","checked","setChecked","Row","InputContainer","aria-labelledby","disabled","result","styles","height","Checkbox","h2","p","ul","li","ProjectScreen","currentProject","TaskList","id","selectedTaskId","setSelectedTaskId","selectedTask","find","canEdit","customData","canWritePartitions","useModifiableProjects","includes","draftTask","setDraftTask","createDraftTask","deleteDraftTask","setDraftTaskName","submitDraftTask","useDraftTask","TaskListHeader","style","cursor","Sidebar","setCurrentProject","projects","memberOf","useProjects","SidebarContainer","SectionHeading","SectionList","SectionListItem","isSelected","UserDetails","user","handleLogout","handleEditPermissions","light1","UserDetailsContainer","Username","profile","TextButton","TaskApp","gridAreaSidebar","gridAreaMain","createRealmApolloClient","link","HttpLink","uri","fetch","options","refreshCustomData","headers","Authorization","accessToken","InMemoryCache","ApolloClient","RealmApolloProvider","client","setClient","ApolloProvider","RequireLoggedInUser","App","window","location","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.aa2ff84f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport * as Realm from \"realm-web\";\r\n\r\nconst RealmAppContext = React.createContext();\r\n\r\nexport const useRealmApp = () => {\r\n  const app = React.useContext(RealmAppContext);\r\n  if (!app) {\r\n    throw new Error(\r\n      `You must call useRealmApp() inside of a <RealmAppProvider />`\r\n    );\r\n  }\r\n  return app;\r\n};\r\n\r\nexport const RealmAppProvider = ({ appId, children }) => {\r\n  // Wrap the Realm.App object with React state.\r\n  const [app, setApp] = React.useState(new Realm.App(appId));\r\n  \r\n  React.useEffect(() => {\r\n    setApp(new Realm.App(appId));\r\n  }, [appId]);\r\n\r\n  // Wrap the Realm.App object's user state with React state\r\n  const [currentUser, setCurrentUser] = React.useState(app.currentUser);\r\n\r\n  async function logIn(credentials) {\r\n    // Call the logIn() method with the given credentials\r\n    await app.logIn(credentials);\r\n    // If successful, app.currentUser is the user that just logged in\r\n    setCurrentUser(app.currentUser);\r\n  }\r\n  async function logOut() {\r\n    // Log out the currently active user\r\n    // Call the logOut() method on the current user.\r\n    await app.currentUser?.logOut();\r\n    // If another user was logged in too, they're now the current user.\r\n    // Otherwise, app.currentUser is null.\r\n    // Call the setCurrentUser() method on the app's current user.\r\n    setCurrentUser(app.currentUser);\r\n  }\r\n\r\n  const wrapped = { ...app, currentUser, logIn, logOut };\r\n\r\n  return (\r\n    <RealmAppContext.Provider value={wrapped}>\r\n      {children}\r\n    </RealmAppContext.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport LGCard from \"@leafygreen-ui/card\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Layout = styled.div`\r\n  padding: 8px;\r\n  color: black;\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: left;\r\n`;\r\n\r\nexport default function Card({ children, ...props }) {\r\n  return (\r\n    <LGCard {...props}>\r\n      <Layout>{children}</Layout>\r\n    </LGCard>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\nimport GridLoader from \"react-spinners/GridLoader\";\r\n\r\nexport default function Loading() {\r\n  return <GridLoader size=\"15px\" margin=\"3px\" color={uiColors.gray.dark2} />;\r\n}\r\n","import React from \"react\";\r\nimport * as Realm from \"realm-web\";\r\nimport { useRealmApp } from \"../RealmApp\";\r\nimport styled from \"@emotion/styled\";\r\nimport Button from \"@leafygreen-ui/button\";\r\nimport TextInput from \"@leafygreen-ui/text-input\";\r\nimport LGCard from \"./Card\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\nimport validator from \"validator\";\r\nimport Loading from \"./Loading\";\r\n\r\nexport default function LoginScreen() {\r\n  const app = useRealmApp();\r\n\r\n  // Toggle between logging users in and registering new users\r\n  const [mode, setMode] = React.useState(\"login\");\r\n  const toggleMode = () => {\r\n    setMode((oldMode) => (oldMode === \"login\" ? \"register\" : \"login\"));\r\n  };\r\n\r\n  // Keep track of form input state\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n\r\n  // Keep track of input validation/errors\r\n  const [error, setError] = React.useState({});\r\n\r\n  // Whenever the mode changes, clear the form inputs\r\n  React.useEffect(() => {\r\n    setEmail(\"sampleemail@example.com\");\r\n    setPassword(\"password\");\r\n    setError({});\r\n  }, [mode]);\r\n\r\n  const [isLoggingIn, setIsLoggingIn] = React.useState(false);\r\n  const handleLogin = async () => {\r\n    setIsLoggingIn(true);\r\n    setError((e) => ({ ...e, password: null }));\r\n    try {\r\n      // Call the logIn() method and pass it the emailPassword credentials.\r\n      await app.logIn(Realm.Credentials.emailPassword(email, password));\r\n    } catch (err) {\r\n      handleAuthenticationError(err, setError);\r\n      setIsLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const handleRegistrationAndLogin = async () => {\r\n    const isValidEmailAddress = validator.isEmail(email);\r\n    \r\n    setError((e) => ({ ...e, password: null }));\r\n   \r\n    if (isValidEmailAddress) {\r\n      try {\r\n        // Register the user and, if successful, log them in\r\n        // Create new emailPassword credentials by calling the registerUser() method.\r\n        await app.emailPasswordAuth.registerUser(email, password);\r\n        return await handleLogin();\r\n      } catch (err) {\r\n        handleAuthenticationError(err, setError);\r\n      }\r\n    } else {\r\n      setError((err) => ({ ...err, email: \"Email is invalid.\" }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      {isLoggingIn ? (\r\n        <Loading />\r\n      ) : (\r\n        <Card>\r\n          <LoginFormRow>\r\n            <LoginHeading>\r\n              {mode === \"login\" ? \"Log In\" : \"Register an Account\"}\r\n            </LoginHeading>\r\n          </LoginFormRow>\r\n          <LoginFormRow>\r\n            <TextInput\r\n              type=\"email\"\r\n              label=\"Email\"\r\n              placeholder=\"your.email@example.com\"\r\n              onChange={(e) => {\r\n                setError((e) => ({ ...e, email: null }));\r\n                setEmail(e.target.value);\r\n              }}\r\n              value={email}\r\n              state={\r\n                error.email\r\n                  ? \"error\"\r\n                  : validator.isEmail(email)\r\n                  ? \"valid\"\r\n                  : \"none\"\r\n              }\r\n              errorMessage={error.email}\r\n            />\r\n          </LoginFormRow>\r\n          <LoginFormRow>\r\n            <TextInput\r\n              type=\"password\"\r\n              label=\"Password\"\r\n              placeholder=\"pa55w0rd\"\r\n              onChange={(e) => {\r\n                setPassword(e.target.value);\r\n              }}\r\n              value={password}\r\n              state={\r\n                error.password ? \"error\" : error.password ? \"valid\" : \"none\"\r\n              }\r\n              errorMessage={error.password}\r\n            />\r\n          </LoginFormRow>\r\n          {mode === \"login\" ? (\r\n            <Button variant=\"primary\" onClick={() => handleLogin()}>\r\n              Log In\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => handleRegistrationAndLogin()}\r\n            >\r\n              Register\r\n            </Button>\r\n          )}\r\n          <ToggleContainer>\r\n            <ToggleText>\r\n              {mode === \"login\"\r\n                ? \"Don't have an account?\"\r\n                : \"Already have an account?\"}\r\n            </ToggleText>\r\n            <ToggleLink\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                toggleMode();\r\n              }}\r\n            >\r\n              {mode === \"login\" ? \"Register one now.\" : \"Log in instead.\"}\r\n            </ToggleLink>\r\n          </ToggleContainer>\r\n        </Card>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nfunction handleAuthenticationError(err, setError) {\r\n  const { status, message } = parseAuthenticationError(err);\r\n  const errorType = message || status;\r\n  switch (errorType) {\r\n    case \"invalid username\":\r\n      setError((prevErr) => ({ ...prevErr, email: \"Invalid email address.\" }));\r\n      break;\r\n    case \"invalid username/password\":\r\n    case \"invalid password\":\r\n    case \"401\":\r\n      setError((err) => ({ ...err, password: \"Incorrect password.\" }));\r\n      break;\r\n    case \"name already in use\":\r\n    case \"409\":\r\n      setError((err) => ({ ...err, email: \"Email is already registered.\" }));\r\n      break;\r\n    case \"password must be between 6 and 128 characters\":\r\n    case \"400\":\r\n      setError((err) => ({\r\n        ...err,\r\n        password: \"Password must be between 6 and 128 characters.\",\r\n      }));\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nfunction parseAuthenticationError(err) {\r\n  const parts = err.message.split(\":\");\r\n  const reason = parts[parts.length - 1].trimStart();\r\n  if (!reason) return { status: \"\", message: \"\" };\r\n  const reasonRegex = /(?<message>.+)\\s\\(status (?<status>[0-9][0-9][0-9])/;\r\n  const match = reason.match(reasonRegex);\r\n  const { status, message } = match?.groups ?? {};\r\n  return { status, message };\r\n}\r\n\r\nconst Card = styled(LGCard)`\r\n  width: 420px;\r\n`;\r\nconst ToggleContainer = styled.div`\r\n  margin-top: 8px;\r\n  font-size: 12px;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ToggleText = styled.span`\r\n  line-height: 18px;\r\n`;\r\n\r\nconst ToggleLink = styled.button`\r\n  background: none;\r\n  border: none;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  color: ${uiColors.green.dark2};\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: ${uiColors.gray.light2};\r\n`;\r\n\r\nconst LoginHeading = styled.h1`\r\n  margin: 0;\r\n  font-size: 32px;\r\n`;\r\n\r\nconst LoginFormRow = styled.div`\r\n  margin-bottom: 16px;\r\n`;\r\n","import { ObjectId } from \"bson\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport gql from \"graphql-tag\";\r\n\r\nexport default function useTaskMutations(project) {\r\n  return {\r\n    addTask: useAddTask(project),\r\n    updateTask: useUpdateTask(project),\r\n    deleteTask: useDeleteTask(project),\r\n  };\r\n}\r\n\r\n// Add the GraphGL mutation for adding a task.\r\nconst AddTaskMutation = gql`\r\n  mutation AddTask($task: TaskInsertInput!) {\r\n    addedTask: insertOneTask(data: $task) {\r\n      _id\r\n      _partition\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\n// Add the GraphGL mutation for updating a task.\r\nconst UpdateTaskMutation = gql`\r\n mutation UpdateTask($taskId: ObjectId!, $updates: TaskUpdateInput!) {\r\n    updatedTask: updateOneTask(query: { _id: $taskId }, set: $updates) {\r\n      _id\r\n      _partition\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\n// Add the GraphGL mutation for deleting a task.\r\nconst DeleteTaskMutation = gql`\r\nmutation DeleteTask($taskId: ObjectId!) {\r\n    deletedTask: deleteOneTask(query: { _id: taskId }) {\r\n      _id\r\n      _partition\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\nconst TaskFieldsFragment = gql`\r\n  fragment TaskFields on Task {\r\n    _id\r\n    _partition\r\n    status\r\n    name\r\n  }\r\n`;\r\n\r\nfunction useAddTask(project) {\r\n  const [addTaskMutation] = useMutation(AddTaskMutation, {\r\n    // Manually save added Tasks into the Apollo cache so that Task queries automatically update\r\n    // For details, refer to https://www.apollographql.com/docs/react/data/mutations/#making-all-other-cache-updates\r\n    update: (cache, { data: { addedTask } }) => {\r\n      cache.modify({\r\n        fields: {\r\n          tasks: (existingTasks = []) => [\r\n            ...existingTasks,\r\n            cache.writeFragment({\r\n              data: addedTask,\r\n              fragment: TaskFieldsFragment,\r\n            }),\r\n          ],\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  const addTask = async (task) => {\r\n    // Use the functions returned from the addTaskMutation hook to execute the mutation.\r\n    const { addedTask } = await addTaskMutation({\r\n      variables: {\r\n        task: {\r\n          _id: new ObjectId(),\r\n          _partition: project.partition,\r\n          status: \"Open\",\r\n          ...task,\r\n        },\r\n      },\r\n    });\r\n\r\n    return addedTask;\r\n  };\r\n\r\n  return addTask;\r\n}\r\n\r\nfunction useUpdateTask(project) {\r\n  const [updateTaskMutation] = useMutation(UpdateTaskMutation);\r\n  // Use the functions returned from the updateTaskMutation to execute the mutation.\r\n  const updateTask = async (task, updates) => {\r\n    const { updatedTask } = await updateTaskMutation({\r\n      variables: { taskId: task._id, updates },\r\n    });\r\n    return updatedTask;\r\n  }\r\n  return updateTask;\r\n}\r\n\r\nfunction useDeleteTask(project) {\r\n  const [deleteTaskMutation] = useMutation(DeleteTaskMutation);\r\n  // TODO: Use the functions returned from the deleteTaskMutation to execute the mutation.\r\n  const deleteTask = async (task) => {\r\n    const { deletedTask } = await deleteTaskMutation({\r\n      variables: { taskID: task._id },\r\n  });\r\n    return deletedTask;\r\n  }\r\n  return deleteTask;\r\n}\r\n","import { useQuery } from \"@apollo/client\";\r\nimport gql from \"graphql-tag\";\r\nimport useTaskMutations from \"./useTaskMutations\";\r\n\r\nconst useTasks = (project) => {\r\n  const { tasks, loading } = useAllTasksInProject(project);\r\n  const { addTask, updateTask } = useTaskMutations(project);\r\n  return {\r\n    loading,\r\n    tasks,\r\n    updateTask,\r\n    addTask,\r\n  };\r\n};\r\nexport default useTasks;\r\n\r\nfunction useAllTasksInProject(project) {\r\n  const { data, loading, error } = useQuery(\r\n    gql`\r\n      query GetAllTasksForProject($partition: String!) {\r\n        tasks(query: { _partition: $partition }) {\r\n          _id\r\n          name\r\n          status\r\n        }\r\n      }\r\n    `,\r\n    { variables: { partition: project.partition } }\r\n  );\r\n  if (error) {\r\n    throw new Error(`Failed to fetch tasks: ${error.message}`);\r\n  }\r\n\r\n  // If the query has finished, return the tasks from the result data\r\n  // Otherwise, return an empty list\r\n  const tasks = data?.tasks ?? [];\r\n  return { tasks, loading };\r\n}\r\n","import React from \"react\";\r\nimport Badge from \"@leafygreen-ui/badge\";\r\n\r\nexport default function StatusBadge({ status }) {\r\n  return (\r\n    <Badge variant={getColorForStatus(status)}>\r\n      {getTaskStatusDisplayName(status)}\r\n    </Badge>\r\n  );\r\n}\r\n\r\nconst getColorForStatus = (status) => {\r\n  switch (status) {\r\n    case \"Open\":\r\n      return \"blue\";\r\n    case \"InProgress\":\r\n      return \"yellow\";\r\n    case \"Complete\":\r\n      return \"green\";\r\n    default:\r\n      return \"gray\";\r\n  }\r\n};\r\n\r\nconst getTaskStatusDisplayName = (status) => {\r\n  if (status === \"InProgress\") {\r\n    // Add a non-breaking space so that the string is always a single line\r\n    const nbsp = String.fromCharCode(160);\r\n    return `In${nbsp}Progress`;\r\n  }\r\n  return status;\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport StatusBadge from \"./StatusBadge\";\r\n\r\nexport default function TaskContent({ task }) {\r\n  return (\r\n    <TaskDescription>\r\n      <TaskName>{task.name}</TaskName>\r\n      <StatusBadge status={task.status} />\r\n    </TaskDescription>\r\n  );\r\n}\r\n\r\nconst TaskDescription = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n`;\r\nconst TaskName = styled.span`\r\n  flex-grow: 1;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { css } from \"@emotion/core\";\r\n\r\nconst ButtonGroup = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: ${props.direction === \"row\" ? \"row\" : \"column\"};\r\n    justify-content: center;\r\n    gap: 8px;\r\n    margin-top: 8px;\r\n  `\r\n);\r\nexport default ButtonGroup;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport StatusBadge from \"./StatusBadge\";\r\nimport ArrowRightIcon from \"@leafygreen-ui/icon/dist/ArrowRight\";\r\n\r\nexport default function StatusChange({ from, to }) {\r\n  return (\r\n    <Container>\r\n      <StatusBadge status={from} />\r\n      <ArrowRightIcon />\r\n      <StatusBadge status={to} />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport LGButton from \"@leafygreen-ui/button\";\r\nimport StatusChange from \"./StatusChange\";\r\nimport useTaskMutations from \"../graphql/useTaskMutations\";\r\n\r\n// Use a hook to dynamically create status update buttons for the specified project\r\nexport default function useChangeTaskStatusButton(project) {\r\n  const { updateTask } = useTaskMutations(project);\r\n  const ChangeTaskStatusButton = ({ task, fromStatus, toStatus, children }) => {\r\n    return (\r\n      <Button onClick={() => updateTask(task, { status: toStatus })}>\r\n        <ButtonContent>\r\n          {children}\r\n          <StatusChange from={fromStatus} to={toStatus} />\r\n        </ButtonContent>\r\n      </Button>\r\n    );\r\n  };\r\n  return ChangeTaskStatusButton;\r\n}\r\n\r\nconst Button = styled(LGButton)`\r\n  height: 100%;\r\n`;\r\n\r\nconst ButtonContent = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 8px 0;\r\n  gap: 8px;\r\n`;\r\n","import React from \"react\";\r\nimport TaskContent from \"./TaskContent\";\r\nimport Modal from \"@leafygreen-ui/modal\";\r\nimport ButtonGroup from \"./ButtonGroup\";\r\nimport useChangeTaskStatusButton from \"./useChangeTaskStatusButton\";\r\n\r\nexport default function TaskDetailModal({ project, task, unselectTask }) {\r\n  const ChangeTaskStatusButton = useChangeTaskStatusButton(project);\r\n\r\n  return (\r\n    <Modal\r\n      open={Boolean(task)} // Show the modal if we passed a Task into the task prop.\r\n      setOpen={unselectTask} // When the user tries to close the modal, unset the Task to stop showing the modal\r\n    >\r\n      {task && (\r\n        <>\r\n          <TaskContent task={task} />\r\n          <ButtonGroup direction=\"row\">\r\n            {task.status === \"Open\" && (\r\n              <ChangeTaskStatusButton\r\n                task={task}\r\n                fromStatus=\"Open\"\r\n                toStatus=\"InProgress\"\r\n              >\r\n                Start Progress\r\n              </ChangeTaskStatusButton>\r\n            )}\r\n            {task.status === \"InProgress\" && (\r\n              <>\r\n                <ChangeTaskStatusButton\r\n                  task={task}\r\n                  fromStatus=\"InProgress\"\r\n                  toStatus=\"Open\"\r\n                >\r\n                  Stop Progress\r\n                </ChangeTaskStatusButton>\r\n                <ChangeTaskStatusButton\r\n                  task={task}\r\n                  fromStatus=\"InProgress\"\r\n                  toStatus=\"Complete\"\r\n                >\r\n                  Complete Task\r\n                </ChangeTaskStatusButton>\r\n              </>\r\n            )}\r\n            {task.status === \"Complete\" && (\r\n              <ChangeTaskStatusButton\r\n                task={task}\r\n                fromStatus=\"Complete\"\r\n                toStatus=\"InProgress\"\r\n              >\r\n                Resume Task\r\n              </ChangeTaskStatusButton>\r\n            )}\r\n          </ButtonGroup>\r\n        </>\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nimport LGButton from \"@leafygreen-ui/button\";\r\nimport Modal from \"@leafygreen-ui/modal\";\r\nimport XIcon from \"@leafygreen-ui/icon/dist/X\";\r\nimport PlusIcon from \"@leafygreen-ui/icon/dist/Plus\";\r\nimport IconButton from \"@leafygreen-ui/icon-button\";\r\nimport TextInput from \"@leafygreen-ui/text-input\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\nimport { useRealmApp } from \"../RealmApp\";\r\n\r\n\r\nfunction useTeamMembers() {\r\n  const [teamMembers, setTeamMembers] = React.useState(null);\r\n  const [newUserEmailError, setNewUserEmailError] = React.useState(null);\r\n  const app = useRealmApp();\r\n\r\n\r\n  // Import the Realm functions: addTeamMember, removeTeamMember, and getMyTeamMembers\r\n  const { addTeamMember, removeTeamMember, getMyTeamMembers } = app.currentUser.functions;\r\n\r\n  // Implement the function updateTeamMembers so that it calls getMyTeamMembers and updates\r\n  // the team variable with the current team members.\r\n  const updateTeamMembers = () => {\r\n    getMyTeamMembers().then(setTeamMembers);\r\n  };\r\n\r\n  // display team members on load\r\n  React.useEffect(updateTeamMembers, []);\r\n\r\n  return {\r\n    teamMembers,\r\n    errorMessage: newUserEmailError,\r\n    // Call the addTeamMember() function and return updateTeamMembers if\r\n    // addTeamMember() was successful.\r\n    addTeamMember: async (email, isReadOnly) => {\r\n      const { error } = await addTeamMember(email, isReadOnly);\r\n\r\n      if (error) {\r\n        setNewUserEmailError(error);\r\n        return { error };\r\n      } else {\r\n        updateTeamMembers();\r\n      }\r\n    },\r\n    // Call the removeTeamMember()\r\n    removeTeamMember: async (email) => {\r\n      await removeTeamMember(email);\r\n      updateTeamMembers();\r\n    },\r\n  };\r\n}\r\n\r\nexport default function EditPermissionsModal({\r\n  isEditingPermissions,\r\n  setIsEditingPermissions,\r\n}) {\r\n  const {\r\n    teamMembers,\r\n    errorMessage,\r\n    addTeamMember,\r\n    removeTeamMember,\r\n  } = useTeamMembers();\r\n  return (\r\n    <Modal\r\n      open={isEditingPermissions}\r\n      setOpen={setIsEditingPermissions}\r\n      size=\"small\"\r\n    >\r\n      <ContentContainer>\r\n        <ModalHeading>Team Members</ModalHeading>\r\n        <ModalText>\r\n          These users can add, read, and modify tasks in your project. Check the Read-Only Member option if you only want them to view your project and its tasks.\r\n        </ModalText>\r\n        <ModalText>Add a new user by email:</ModalText>\r\n        <AddTeamMemberInput\r\n          addTeamMember={addTeamMember}\r\n          errorMessage={errorMessage}\r\n        />\r\n        <List>\r\n          {teamMembers?.length ? (\r\n            teamMembers.map((teamMember) => {\r\n              return (\r\n                <ListItem key={teamMember._id}>\r\n                  <TeamMemberContainer>\r\n                    <TeamMemberName>{teamMember.name}</TeamMemberName>\r\n                    <IconButton\r\n                      aria-label=\"remove-team-member-button\"\r\n                      className=\"remove-team-member-button\"\r\n                      onClick={async () => {\r\n                        await removeTeamMember(teamMember.name);\r\n                      }}\r\n                    >\r\n                      <XIcon />\r\n                    </IconButton>\r\n                  </TeamMemberContainer>\r\n                </ListItem>\r\n              );\r\n            })\r\n          ) : (\r\n            <ModalText>No team members</ModalText>\r\n          )}\r\n        </List>\r\n      </ContentContainer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction AddTeamMemberInput({ addTeamMember, errorMessage }) {\r\n  const [inputValue, setInputValue] = React.useState(\"\");\r\n  const [checked, setChecked] = React.useState(false);\r\n\r\n  const handleCheck = () => {\r\n    setChecked(!checked);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <InputContainer>\r\n          <TextInput\r\n            type=\"email\"\r\n            aria-labelledby=\"team member email address\"\r\n            placeholder=\"some.email@example.com\"\r\n            state={errorMessage ? \"error\" : \"none\"}\r\n            errorMessage={errorMessage ?? \"Foo\"}\r\n            onChange={(e) => {\r\n              setInputValue(e.target.value);\r\n            }}\r\n            value={inputValue}\r\n          />\r\n        </InputContainer>\r\n      </Row>\r\n      <Row>\r\n        <InputContainer>\r\n          <Checkbox\r\n            label=\"Read-Only Member (Can View tasks but not Add tasks)\"\r\n            value={checked}\r\n            onChange={handleCheck}\r\n          />\r\n        </InputContainer>\r\n      </Row>\r\n      <Row>\r\n        <Button\r\n          disabled={!inputValue}\r\n          onClick={async () => {\r\n            const result = await addTeamMember(inputValue, checked);\r\n            if (!result?.error) {\r\n              setInputValue(\"\");\r\n              setChecked(false);\r\n            }\r\n          }}\r\n          styles={{ height: \"36px\" }}\r\n        >\r\n          <PlusIcon />\r\n          Add User\r\n        </Button>\r\n      </Row>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Checkbox = ({ label, value, onChange }) => {\r\n  return (\r\n    <label>\r\n      <input type=\"checkbox\" checked={value} onChange={onChange} />\r\n      {label}\r\n    </label>\r\n  );\r\n};\r\n\r\nconst Button = styled(LGButton)`\r\n  height: 36px;\r\n  display: flex;\r\n  justify-content: right;\r\n`;\r\n\r\nconst Row = styled.div`\r\n  display: flex;\r\n  align-items: end;\r\n`;\r\nconst InputContainer = styled.div`\r\n  flex-grow: 1;\r\n  margin-bottom: 15px;\r\n`;\r\nconst ModalHeading = styled.h2`\r\n  margin: 0;\r\n  font-size: 24px;\r\n`;\r\nconst ModalText = styled.p`\r\n  margin: 8px 2px;\r\n`;\r\n\r\nconst ContentContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nconst List = styled.ul`\r\n  list-style: none;\r\n  padding: 8px 0;\r\n  margin: 0;\r\n`;\r\nconst ListItem = styled.li(\r\n  (props) => css`\r\n    padding: 8px 12px;\r\n    border-radius: 8px;\r\n    :hover {\r\n      background: ${uiColors.gray.light2};\r\n    }\r\n  `\r\n);\r\nconst TeamMemberContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst TeamMemberName = styled.div`\r\n  flex-grow: 1;\r\n  padding: 8px 0;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport useTasks from \"../graphql/useTasks\";\r\nimport TaskContent from \"./TaskContent\";\r\nimport TaskDetailModal from \"./TaskDetailModal\";\r\nimport EditPermissionsModal from \"./EditPermissionsModal\";\r\nimport Card from \"./Card\";\r\nimport Button from \"@leafygreen-ui/button\";\r\nimport ButtonGroup from \"./ButtonGroup\";\r\nimport TextInput from \"@leafygreen-ui/text-input\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\nimport useModifiableProjects from \"../graphql/useModifiableProjects\";\r\n\r\nimport Loading from \"./Loading\";\r\n\r\nexport default function ProjectScreen({\r\n  currentProject,\r\n  isEditingPermissions,\r\n  setIsEditingPermissions,\r\n}) {\r\n  return (\r\n    <Container>\r\n      {currentProject && <TaskList currentProject={currentProject} />}\r\n      <EditPermissionsModal\r\n        isEditingPermissions={isEditingPermissions}\r\n        setIsEditingPermissions={setIsEditingPermissions}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  grid-area: main;\r\n  background: ${uiColors.gray.light2};\r\n`;\r\n\r\nfunction useDraftTask({ addTask }) {\r\n  const [draftTask, setDraftTask] = React.useState(null);\r\n  const createDraftTask = () => {\r\n    setDraftTask({ name: \"\" });\r\n  };\r\n  const deleteDraftTask = () => {\r\n    setDraftTask(null);\r\n  };\r\n  const setDraftTaskName = (name) => {\r\n    setDraftTask({ name });\r\n  };\r\n  const submitDraftTask = async () => {\r\n    await addTask(draftTask);\r\n    setDraftTask(null);\r\n  };\r\n  return {\r\n    draftTask,\r\n    createDraftTask,\r\n    deleteDraftTask,\r\n    setDraftTaskName,\r\n    submitDraftTask,\r\n  };\r\n}\r\n\r\nfunction TaskList({ currentProject }) {\r\n  const { tasks, addTask, loading } = useTasks(currentProject);\r\n  const getTaskById = (id) => tasks.find((task) => task._id === id);\r\n  const [selectedTaskId, setSelectedTaskId] = React.useState(null);\r\n  const selectedTask = getTaskById(selectedTaskId);\r\n  const modifiableProjects = useModifiableProjects();\r\n  const canEdit = modifiableProjects.includes(currentProject.partition);\r\n\r\n  const {\r\n    draftTask,\r\n    createDraftTask,\r\n    deleteDraftTask,\r\n    setDraftTaskName,\r\n    submitDraftTask,\r\n  } = useDraftTask({ addTask });\r\n\r\n  return loading ? (\r\n    <Loading />\r\n  ) : (\r\n    <>\r\n      <List>\r\n        {tasks.length === 0 ? (\r\n          <TaskListHeader>\r\n            <h1>No Tasks</h1>\r\n            <p>Click the button below to add a task to this project</p>\r\n          </TaskListHeader>\r\n        ) : (\r\n          tasks.map((task) => (\r\n            <ListItem key={task._id}>\r\n              <Card style={canEdit ? {cursor: \"pointer\"} : {cursor: \"default\"}} onClick={() => canEdit && setSelectedTaskId(task._id)}>\r\n                <TaskContent task={task} />\r\n              </Card>\r\n            </ListItem>\r\n          ))\r\n        )}\r\n        {draftTask ? (\r\n          <ListItem>\r\n            <Card>\r\n              <TextInput\r\n                type=\"text\"\r\n                aria-labelledby=\"task description\"\r\n                placeholder=\"Do the dishes\"\r\n                onChange={(e) => {\r\n                  setDraftTaskName(e.target.value);\r\n                }}\r\n                value={draftTask.name}\r\n              />\r\n              <ButtonGroup>\r\n                <Button\r\n                  variant=\"primary\"\r\n                  disabled={!draftTask.name}\r\n                  onClick={() => {\r\n                    submitDraftTask();\r\n                  }}\r\n                >\r\n                  Add\r\n                </Button>\r\n                <Button\r\n                  variant=\"danger\"\r\n                  onClick={() => {\r\n                    deleteDraftTask();\r\n                  }}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </ButtonGroup>\r\n            </Card>\r\n          </ListItem>\r\n        ) : (\r\n          <ListItem>\r\n            {canEdit && (\r\n              <Card>\r\n                <Button onClick={() => createDraftTask()}>Add Task</Button>\r\n              </Card>) \r\n            }\r\n          </ListItem>\r\n        )}\r\n      </List>\r\n      <TaskDetailModal\r\n        project={currentProject}\r\n        task={selectedTask}\r\n        unselectTask={setSelectedTaskId}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nconst List = styled.ul`\r\n  list-style-type: none;\r\n  padding-left: 0;\r\n  width: 400px;\r\n`;\r\nconst ListItem = styled.li`\r\n  :not(:first-of-type) {\r\n    margin-top: 8px;\r\n  }\r\n`;\r\n\r\nconst TaskListHeader = styled.div`\r\n  line-height: 24px;\r\n  letter-spacing: 0px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n`;\r\n","import { useRealmApp } from \"../RealmApp\";\r\n\r\nexport default function useModifiableProjects() {\r\n  const app = useRealmApp();\r\n  \r\n  if (!app.currentUser) {\r\n    throw new Error(\"Cannot list projects if there is no logged in user.\");\r\n  }\r\n\r\n  // Retrieve the current user's projects and assign it to `projects`.\r\n  const modifiableProjects = app.currentUser.customData.canWritePartitions;\r\n\r\n  return modifiableProjects;\r\n}\r\n","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useRealmApp } from \"../RealmApp\";\r\nimport useProjects from \"../graphql/useProjects\";\r\nimport Card from \"./Card\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\n\r\nexport default function Sidebar({\r\n  currentProject,\r\n  setCurrentProject,\r\n  setIsEditingPermissions,\r\n}) {\r\n  const projects = useProjects();\r\n  const app = useRealmApp();\r\n\r\n  return (\r\n    <SidebarContainer>\r\n      <Card>\r\n        <SectionHeading>Projects</SectionHeading>\r\n        <SectionList>\r\n          {projects.map((project) => (\r\n            <SectionListItem\r\n              key={project.partition}\r\n              onClick={() => setCurrentProject(project)}\r\n              isSelected={project.partition === currentProject?.partition}\r\n            >\r\n              {project.name}\r\n            </SectionListItem>\r\n          ))}\r\n        </SectionList>\r\n        <UserDetails\r\n          user={app.currentUser}\r\n          handleLogout={() => {\r\n            app.logOut();\r\n          }}\r\n          handleEditPermissions={() => {\r\n            setIsEditingPermissions(true);\r\n          }}\r\n        />\r\n      </Card>\r\n    </SidebarContainer>\r\n  );\r\n}\r\n\r\nconst SidebarContainer = styled.div`\r\n  display: flex;\r\n  background: ${uiColors.gray.light2};\r\n  flex-direction: column;\r\n  padding: 40px;\r\n`;\r\n\r\nconst SectionHeading = styled.h2`\r\n  margin: 0;\r\n  padding: 8px;\r\n`;\r\nconst SectionList = styled.ul`\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n`;\r\nconst SectionListItem = styled.li(\r\n  (props) => css`\r\n    padding: 8px 12px;\r\n    border-radius: 8px;\r\n    background: ${props.isSelected && uiColors.green.light2};\r\n    :hover {\r\n      background: ${!props.isSelected && uiColors.gray.light1};\r\n    }\r\n  `\r\n);\r\n\r\nfunction UserDetails({ user, handleLogout, handleEditPermissions }) {\r\n  return (\r\n    <UserDetailsContainer>\r\n      <Username>{user.profile.email}</Username>\r\n      <TextButton onClick={handleEditPermissions}>Manage My Project</TextButton>\r\n      <TextButton onClick={handleLogout}>Log Out</TextButton>\r\n    </UserDetailsContainer>\r\n  );\r\n}\r\n\r\nconst UserDetailsContainer = styled.div`\r\n  padding: 8px 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Username = styled.div`\r\n  font-weight: bold;\r\n  text-align: center;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst TextButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  padding: 4px;\r\n  color: #069;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  color: ${uiColors.green.dark2};\r\n`;\r\n","import { useRealmApp } from \"../RealmApp\";\r\n\r\nexport default function useProjects() {\r\n  const app = useRealmApp();\r\n  \r\n  if (!app.currentUser) {\r\n    throw new Error(\"Cannot list projects if there is no logged in user.\");\r\n  }\r\n\r\n  // Retrieve the current user's projects and assign it to `projects`.\r\n  const projects = app.currentUser.customData.memberOf;\r\n\r\n  return projects;\r\n}\r\n","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useRealmApp } from \"./RealmApp\";\r\nimport ProjectScreen from \"./components/ProjectScreen\";\r\nimport Sidebar from \"./components/Sidebar\";\r\n\r\nexport default function TaskApp() {\r\n  const app = useRealmApp();\r\n  const [currentProject, setCurrentProject] = React.useState(\r\n    // set the current project as  \"My Project\"\r\n    app.currentUser.customData.memberOf[0]\r\n  );\r\n  const [isEditingPermissions, setIsEditingPermissions] = React.useState(false);\r\n  return (\r\n    <Container>\r\n      <Sidebar\r\n        css={gridAreaSidebar}\r\n        currentProject={currentProject}\r\n        setCurrentProject={setCurrentProject}\r\n        setIsEditingPermissions={setIsEditingPermissions}\r\n      ></Sidebar>\r\n      <ProjectScreen\r\n        css={gridAreaMain}\r\n        currentProject={currentProject}\r\n        isEditingPermissions={isEditingPermissions}\r\n        setIsEditingPermissions={setIsEditingPermissions}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst sidebarWidth = \"420px\";\r\nconst Container = styled.div`\r\n  box-sizing: border-box;\r\n  height: 100vh;\r\n  width: 100vh;\r\n  display: grid;\r\n  grid-template-columns: ${sidebarWidth} calc(100vw - ${sidebarWidth});\r\n  grid-template-rows: 1fr;\r\n  grid-template-areas: \"sidebar main\";\r\n`;\r\n\r\nconst gridAreaSidebar = css`\r\n  grid-area: sidebar;\r\n`;\r\nconst gridAreaMain = css`\r\n  grid-area: sidebar;\r\n`;\r\n","import React from \"react\";\r\nimport { useRealmApp } from \"../RealmApp\";\r\nimport {\r\n  ApolloClient,\r\n  HttpLink,\r\n  InMemoryCache,\r\n  ApolloProvider,\r\n} from \"@apollo/client\";\r\n\r\n// Create an ApolloClient that connects to the provided Realm.App's GraphQL API\r\nconst createRealmApolloClient = (app) => {\r\n  const link = new HttpLink({\r\n    // Realm apps use a standard GraphQL endpoint, identified by their App ID\r\n    uri: `https://realm.mongodb.com/api/client/v2.0/app/${app.id}/graphql`,\r\n\r\n    // A custom fetch handler adds the logged in user's access token to GraphQL requests\r\n    fetch: async (uri, options) => {\r\n      if (!app.currentUser) {\r\n        throw new Error(`Must be logged in to use the GraphQL API`);\r\n      }\r\n\r\n      // Refreshing a user's custom data also refreshes their access token\r\n      await app.currentUser.refreshCustomData();\r\n\r\n      // Include the current user's access token in an Authorization header with every request.\r\n      options.headers.Authorization = `Bearer ${app.currentUser.accessToken}`;\r\n      \r\n      return fetch(uri, options);\r\n    },\r\n  });\r\n\r\n  const cache = new InMemoryCache();\r\n\r\n  return new ApolloClient({ link, cache });\r\n};\r\n\r\nexport default function RealmApolloProvider({ children }) {\r\n  // Create an ``ApolloClient`` object that connects to your app.\r\n  const app = useRealmApp();\r\n  const [client, setClient] = React.useState(createRealmApolloClient(app));\r\n\r\n  React.useEffect(() => {\r\n    setClient(createRealmApolloClient(app));\r\n  }, [app]);\r\n\r\n  return <ApolloProvider client={client}>{children}</ApolloProvider>;\r\n}\r\n","import React from \"react\";\r\nimport LoginScreen from \"./components/LoginScreen\";\r\nimport TaskApp from \"./TaskApp\";\r\nimport RealmApolloProvider from \"./graphql/RealmApolloProvider\";\r\nimport { useRealmApp, RealmAppProvider } from \"./RealmApp\";\r\n\r\nexport const APP_ID = \"tasktracker-fuwvi\";\r\n\r\nconst RequireLoggedInUser = ({ children }) => {\r\n  // Only render children if there is a logged in user.\r\n  const app = useRealmApp();\r\n  return app.currentUser ? children : <LoginScreen />;\r\n  // return children;\r\n};\r\n\r\nexport default function App() {\r\n  return (\r\n    <RealmAppProvider appId={APP_ID}>\r\n      <RequireLoggedInUser>\r\n        <RealmApolloProvider>\r\n          <TaskApp />\r\n        </RealmApolloProvider>\r\n      </RequireLoggedInUser>\r\n    </RealmAppProvider>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}